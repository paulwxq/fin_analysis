### **3.3 模块三：LLM 视觉形态识别 (The AI Chartist)**

这是本系统的核心创新点。利用GPT-4V或同类Vision模型来模拟人类技术分析师的“盘感”。

#### **3.3.1 Prompt 设计策略 (Chain-of-Thought)**

不要只问“这是否是平底锅形态？”。要设计一个结构化的Prompt，引导LLM分步骤思考。

**Prompt 示例 (System Message):**

“你是一位拥有20年经验的资深技术分析师，精通威科夫操盘法（Wyckoff Method）。你的任务是分析这张A股月K线图，寻找‘长期超跌后的底部吸筹’形态。

请按照以下步骤进行分析并输出JSON格式结果：

1. **趋势分析**：左侧是否存在明显的长期下跌趋势？（是/否）  
2. **形态识别**：观察图表右侧最近1-2年的走势。是否存在一个明显的扁平区域（Trading Range）？价格波动率是否显著降低？  
3. **吸筹特征**：是否有‘红肥绿瘦’（阳线多阴线少）或长下影线探底回升的迹象？  
4. **均线关系**：价格是否开始站上或缠绕长期均线（如30月均线）？  
5. **综合评分 (0-100)**：基于以上分析，打分。0代表完全不符合，100代表教科书般的‘圆弧底/平底锅’形态。

**特别注意**：对于仍在创新低的‘下跌中继’形态，必须给低分。”

#### **3.3.2 结果处理**

将LLM返回的JSON解析，提取score和reasoning。

* 设定阈值（如 Score \> 75）筛选出Top 50。  
* 将LLM的评语写入数据库，供后续Agent参考。